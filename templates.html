<template name="tabs">
  <div role="tabpanel">
    <ul class="nav nav-tabs" role="tablist">
      <li role="presentation" class="active"><a href="#heroes" aria-controls="heroes" role="tab" data-toggle="tab">Heroes</a></li>
      <li role="presentation"><a href="#player" aria-controls="player" role="tab" data-toggle="tab">Player</a></li>
      <li role="presentation"><a href="#artifacts" aria-controls="artifacts" role="tab" data-toggle="tab">Artifacts</a></li>
    </ul>
    <div class="tab-content">
      <div role="tabpanel" class="tab-pane active" id="heroes">
        {{> heroes}}
      </div>
      <div role="tabpanel" class="tab-pane" id="player">
        {{> player}}
      </div>
      <div role="tabpanel" class="tab-pane" id="artifacts">
        {{> artifacts}}
      </div>
    </div>
  </div>
</template>


<template name="panels">
  <h2>Heroes</h2>
  <div id="heroes" class="panel panel-default">
    {{> heroes}}
  </div>
  <h2>Player</h2>
  <div id="player" class="panel panel-default">
    {{> player}}
  </div>
  <h2>Artifacts</h2>
  <div id="artifacts" class="panel panel-default">
    {{> artifacts}}
  </div>
</template>


<template name="heroes">
  <table id="herotable" class="table table-striped table-condensed" data-toggle="not table" data-sort-name="id" data-sort-order="asc">
    <thead>
      <tr>
        <!--<th data-field="id" data-sortable="true" data-width="1">UI</th>-->
        <th data-field="name" data-sortable="true">Name</th>
        <th width="1">Skills</th>
        <th data-field="dps" data-sortable="true" class="number">DPS</th>
        <th data-field="upgrade_cost" data-sortable="true" class="number">Upgrade Cost</th>
        <th data-field="next_dps_inc" data-sortable="true" class="number">Next Level DPS Diff</th>
        <th class="number">Gold/DPS</th>
        <th data-field="level" data-sortable="true" data-width="1" width="1">Level</th>
      </tr>
    </thead>
    <tbody>
      {{#each TapTitans.Heroes}}
        {{> hero}}
      {{/each}}
      <tr>
        <th colspan="2" class="text-right">Total Hero DPS:</th>
        <td class="number">{{numberFormat TapTitans.getTotalHeroDps}}</td>
        <th colspan="3" class="text-right">Total Hero Levels:</th>
        <td class="number">{{TapTitans.getTotalHeroLevels}}</td>
      </tr>
    </tbody>
  </table>
</template>

<template name="hero">
  <tr>
  <!--<td>{{heroId}}</td>-->
    <td id="hero{{heroId}}">{{name}}</td>
    <td class="text-nowrap">
      {{#each skills}}
        {{> skillbox}}
      {{/each}}
    </td>
    <td class="number">{{numberFormat getDps}}</td>
    <td class="number">{{numberFormat getUpgradeCost}}</td>
    <td class="number">{{numberFormat getDpsDiff}}</td>
    <td class="number">{{numberFormat goldPerDps}}</td>
    <td>
      <input class="level number" type="number" min="0" value="{{level}}" />
    </td>
  </tr>
</template>

<template name="skillbox">
  <input type="checkbox" id="skill{{skillId}}" class="skill-box" tabindex="-1"
    checked="{{isActive}}"
    disabled="{{isLocked}}"
    title="{{name}}
           {{bonusDescription bonusType magnitude}}
           Skill cost: {{numberFormat getUpgradeCost}}
           {{#unless isActive}}Total cost to obtain: {{numberFormat getTotalUpgradeCost}}{{/unless}}
           " />
</template>

<template name="player">
  <table class="table table-striped table-condensed">
    <thead>
      <tr>
        <th>Name</th>
        <th class="number">Tap Damage</th>
        <th class="number">DPS</th>
        <th class="number">Upgrade Cost</th>
        <th class="number">Next Level DPS Diff</th>
        <th class="number">Gold/DPS</th>
        <th class="number" width="1">Level</th>
        <th class="number" width="1">TPS</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        {{#with TapTitans.Player}}
        <td><input class="name" type="text" value="{{name}}" /></td>
        <td class="number">{{numberFormat getTapDamage}}</td>
        <td class="number">{{numberFormat getDps}}</td>
        <td class="number">{{numberFormat getUpgradeCost}}</td>
        <td class="number">{{numberFormat getDpsDiff}}</td>
        <td class="number">{{numberFormat goldPerDps}}</td>
        <td><input class="level number" type="number" min="1" value="{{level}}" /></td>
        <td><input class="taps number" type="number" min="0" value="{{taps}}" /></td>
        {{/with}}
      </tr>
    </tbody>
  </table>
  <div id="playerdata">
  </div>
</template>

<template name="artifacts">
  <table id="artifacttable" class="table table-striped table-condensed">
    <thead>
      <tr>
        <th>Artifact</th>
        <th>Bonus Type</th>
        <th class="number">Bonus Strength</th>
        <th class="number">+Bonus/Level</th>
        <th class="number">Damage Bonus</th>
        <th class="number">+Damage/Level</th>
        <th class="number">Upgrade Cost</th>
        <th width="1">Level</th>
      </tr>
    </thead>
    <tbody>
      {{#each TapTitans.Artifacts}}
        {{> artifact}}
      {{/each}}
      <tr>
        <th colspan="4" class="text-right">Total Damage Increase:</th>
        <td class="number">{{asPercent totalArtifactAllDamage}}</td>
        <td colspan="3"></td>
      </tr>
    </tbody>
  </table>
</template>

<template name="artifact">
  <tr>
    <td>{{name}}</td>
    <td>{{{bonusDescription bonusType}}}</td>
    <td class="number">{{asPercent getBonus}}</td>
    <td class="number">{{asPercent bonusPerLevel}}</td>
    <td class="number">{{asPercent getDamage}}</td>
    <td class="number">{{asPercent damageDiff}}</td>
    <td class="number">{{numberFormat getUpgradeCost}}</td>
    <td class="text-nowrap">
      <input class="level number" type="number" min="0" max="{{#if maxLevel}}{{maxLevel}}{{/if}}" value="{{level}}" />{{#if maxLevel}}/{{maxLevel}}{{/if}}
    </td>
  </tr>
</template>
