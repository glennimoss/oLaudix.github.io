<template name="tabs">
  <div role="tabpanel">
    <ul class="nav nav-tabs" role="tablist">
      <li role="presentation" class="active"><a href="#heroes" aria-controls="heroes" role="tab" data-toggle="tab">Heroes</a></li>
      <li role="presentation"><a href="#player" aria-controls="player" role="tab" data-toggle="tab">Player</a></li>
      <li role="presentation"><a href="#artifacts" aria-controls="artifacts" role="tab" data-toggle="tab">Artifacts</a></li>
    </ul>
    <div class="tab-content">
      <div role="tabpanel" class="tab-pane active" id="heroes">
        {{> heroes}}
      </div>
      <div role="tabpanel" class="tab-pane" id="player">
        {{> player}}
      </div>
      <div role="tabpanel" class="tab-pane" id="artifacts">
        {{> artifacts}}
      </div>
    </div>
    <button type="button" onclick="TT.UpdateTables()" class="btn btn-default">Update Tables</button>
  </div>
  <div>
    <div class="panel panel-primary">
      <div class="panel-heading">Save panel</div>
      <div class="panel-body">
        <textarea id="savedata"></textarea>
        <div style="margin-top: 10px;">
          <button type="button" onclick="TT.EfficiencyCalculations()" class="btn btn-default">Update</button>
          <button type="button" onclick="TT.Load()" class="btn btn-primary" style="float: right;">Load</button>
          <button type="button" onclick="TT.Save()" class="btn btn-default" style="float: right;">Save</button>
        </div>
      </div>
    </div>
  <!--<label><input type="checkbox" id="addsouls" checked="checked">Include souls gained after ascension</label>-->
    <div class="panel panel-success">
      <div class="panel-heading">Results: <input type="text" id="numberofpredictions" value="30">
      </div>
      <div id="output" class="panel-body"></div>
    </div>
  </div>
</template>


<template name="heroes">
  <table id="herotable" class="table table-striped table-condensed" data-toggle="not table" data-sort-name="id" data-sort-order="asc">
    <thead>
      <tr>
        <!--<th data-field="id" data-sortable="true" data-width="1">UI</th>-->
        <th data-field="name" data-sortable="true">Name</th>
        <th width="1">Skills</th>
        <th data-field="dps" data-sortable="true" class="number">DPS</th>
        <th data-field="upgrade_cost" data-sortable="true" class="number">Upgrade Cost</th>
        <th data-field="next_dps_inc" data-sortable="true" class="number">Next Level DPS Diff</th>
        <th class="number">Gold/DPS</th>
        <th data-field="level" data-sortable="true" data-width="1" width="1">Level</th>
      </tr>
    </thead>
    <tbody>
      {{#each TapTitans.Heroes}}
      <tr>
        {{> hero}}
      </tr>
      {{/each}}
    </tbody>
  </table>
</template>

<template name="hero">
<!--<td>{{heroId}}</td>-->
  <td id="hero{{heroId}}">{{name}}</td>
  <td class="text-nowrap">
    {{#each skills}}
      {{> skillbox}}
    {{/each}}
  </td>
  <td id="hero{{heroId}}currentDPS" class="number">{{numberFormat getDps}}</td>
  <td id="hero{{heroId}}nextUpgradeCost" class="number">{{numberFormat getUpgradeCost}}</td>
  <td id="hero{{heroId}}nextLevelDPSDiff" class="number">{{numberFormat getDpsDiff}}</td>
  <td class="number">{{numberFormat goldPerDps}}</td>
  <td>
    <input id="hero{{heroId}}heroLevel" class="hero-level number" type="number" tabindex="{{heroId}}" min="0" value="{{level}}" />
  </td>
</template>

<template name="skillbox">
  <input type="checkbox" id="skill{{skillID}}" class="skill-box" title="ha" checked="{{isActive}}" />
</template>

<template name="player">
  <table id="playertbl" class="table table-striped table-condensed" data-toggle="not table">
    <thead>
      <tr>
        <th>Name</th>
        <th class="number">Upgrade Cost</th>
        <th class="number">DPS</th>
        <th class="number">Next Level DPS Diff</th>
        <th class="number" width="1">Level</th>
        <th class="number" width="1">TPS</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        {{#with TT.Player}}
        <td><input id="player0name" type="text" value="{{name}}" /></td>
        <td id="player0nextUpgradeCost" class="number">{{nextUpgradeCost}}</td>
        <td id="player0currentDPS" class="number">{{currentDPS}}</td>
        <td id="player0nextLevelDPSDiff" class="number">{{nextLevelDPSDiff}}</td>
        <td><input id="player0heroLevel" class="number" type="text" value="1" size="3"/></td>
        <td><input id="player0clicks" class="number" type="text" value="5" size="2"/></td>
        {{/with}}
      </tr>
    </tbody>
  </table>
  <div id="playerdata">
  </div>
</template>

<template name="artifacts">
  <table id="artifacttable" class="table table-striped">
    <thead>
      <tr>
        <th>Artifact</th>
        <th>Bonus Type</th>
        <th class="number">Bonus Strength</th>
        <th class="number">+Bonus/Level</th>
        <th class="number">Damage Bonus</th>
        <th class="number">+Damage/Level</th>
        <th class="number">Upgrade Cost</th>
        <th width="1">Level</th>
      </tr>
    </thead>
    <tbody>
      {{#each TapTitans.Artifacts}}
      <tr>
        {{> artifact}}
      </tr>
      {{/each}}
    </tbody>
  </table>
</template>

<template name="artifact">
  <td id="{{artifactID}}name">{{name}}</td>
  <td id="{{artifactID}}bonusType">{{bonusType}}</td>
  <td id="{{artifactID}}artifactBonus" class="number" data-bind="text: getBonus"></td>
  <td class="number">{{asPercent bonusPerLevel}}</td>
  <td id="{{artifactID}}DamageBonus" class="number" data-bind="text: getDamage"></td>
  <td class="number">{{asPercent damageBoost}}</td>
  <td id="{{artifactID}}upgradeCost" class="number">{{TT.getArtifactUpgradeCost this}}</td>
  <td class="text-nowrap"><input id="{{artifactID}}level" class="number" type="text" value="0" size="4" data-bind="value: level" />{{#if maxLevel}}/{{maxLevel}}{{/if}}</td>
</template>
